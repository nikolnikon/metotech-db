

# Логика управления прайс-листами #

## Вставка новых записей ##

### В прайс-лист добавляется любая продукция и материалы, даже которых нет в таблицах `alloys` и `production` ###

**Достоинства**
  1. Удобство для пользователя.

**Недостатки**
  1. Необходимо в фоновом режиме заполнять таблицы `alloy` и/или `production`, если добавляемых сплавов и/или продукции нет в БД. при этом не все поля могут быть заполнены в таблицах `alloy` и/или `production`.

### Добавляется только та продукция и материалы, которые есть в таблицах `alloys` и `production` ###

**Достоинства**
  1. Логично. Сплавы, продукция и прайс-листы редактируются независимо друг от друга.
  1. Устраняется недостаток из другого подхода. Таким образом, данные заносятся только в одну таблицу `general_price`.

**Недостатки**
  1. Необходимо детальнее прорабатывать gui => больше кода на javascript.
  1. Возможно некоторое неудобство для пользователя, если сплава или продукции нет в соответствующих таблицах -> сначала необходимо вставить их.

## Обновление записей ##

### Можно редактировать любое поле ###

**Достоинства**
  1. Удобство для пользователя.

**Недостатки**
  1. 


---


# Операции при вставке новой записи в прайс-лист #

  1. Проверить наличие в таблицах `alloys` и `production` вставляемого сплава и продукции.
  1. Если сплав и/или продукция присутствует, то получить соответствующие id.
  1. Если сплав и/или продукция не присутствует, то вставить соответствующие записи в таблицы `alloys` и/или `production` и получить id.
  1. Осуществить вставку записи в таблицу `general_price`.
  1. Осуществить вставку записи в таблицу `special_price`.

---

# Вопросы #
  1. Необходимо подумать, как обрабатывать ситуацию, когда в `general_price` вставляется позиция, которая уже существует в БД?
  1. Возможно, имеет смысл не удалять записи из прайс-листов, а делать их невидимыми. Запись автоматически может становиться невидимой, если количество килограмм равно 0.