#labels Deprecated,Phase-Design
= Логика управления прайс-листами =

== Вставка новых записей ==

=== В прайс-лист добавляется любая продукция и материалы, даже которых нет в таблицах `alloys` и `production` ===

*Достоинства*
 # Удобство для пользователя.

*Недостатки*
 # Необходимо в фоновом режиме заполнять таблицы `alloy` и/или `production`, если добавляемых сплавов и/или продукции нет в БД. при этом не все поля могут быть заполнены в таблицах `alloy` и/или `production`.

=== Добавляется только та продукция и материалы, которые есть в таблицах `alloys` и `production` ===

*Достоинства*
 # Логично. Сплавы, продукция и прайс-листы редактируются независимо друг от друга.
 # Устраняется недостаток из другого подхода. Таким образом, данные заносятся только в одну таблицу `general_price`.

*Недостатки*
 # Необходимо детальнее прорабатывать gui => больше кода на javascript.
 # Возможно некоторое неудобство для пользователя, если сплава или продукции нет в соответствующих таблицах -> сначала необходимо вставить их.

----

= Операции при вставке новой записи в прайс-лист =

 # Проверить наличие в таблицах `alloys` и `production` вставляемого сплава и продукции.
 # Если сплав и/или продукция присутствует, то получить соответствующие id. 
 # Если сплав и/или продукция не присутствует, то вставить соответствующие записи в таблицы `alloys` и/или `production` и получить id.
 # Осуществить вставку записи в таблицу `general_price`.
 # Осуществить вставку записи в таблицу `special_price`.

Необходимо подумать, как обрабатывать ситуацию, когда в `general_price` вставляется позиция, которая уже существует в БД?